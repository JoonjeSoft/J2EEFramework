<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx" xmlns:mvc="http://www.springframework.org/schema/mvc"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
      					http://www.springframework.org/schema/beans/spring-beans.xsd"
	default-autowire="byName">
	<bean id="captchaService" class="com.octo.captcha.service.multitype.GenericManageableCaptchaService">
		<constructor-arg index="0" ref="imageEngine" />
		<constructor-arg type="int" index="1" value="180" /> <!-- minGuarantedStorageDelayInSeconds -->
		<constructor-arg type="int" index="2" value="180000" /> <!-- maxCaptchaStoreSize -->
		<constructor-arg type="int" index="3" value="75000" /> <!-- captchaStoreLoadBeforeGarbageCollection -->
	</bean>
	<bean id="imageEngine" class="com.octo.captcha.engine.GenericCaptchaEngine">
		<description>图片引擎</description>
		<constructor-arg index="0">
			<list>
				<ref bean="captchaFactory" />
			</list>
		</constructor-arg>
	</bean>
	
	<bean id="captchaFactory" class="com.octo.captcha.image.gimpy.GimpyFactory">
		<description>验证码工厂</description>
		<constructor-arg>
			<ref bean="wordgen" />
		</constructor-arg>
		<constructor-arg>
			<ref bean="wordtoimage" />
		</constructor-arg>
	</bean>

	<bean id="wordgen" class="com.octo.captcha.component.word.wordgenerator.RandomWordGenerator">
		<description>文字产生器</description>
		<constructor-arg index="0">
			<value>ABCDEFG</value>
		</constructor-arg>
	</bean>

	<bean id="wordtoimage" class="com.octo.captcha.component.image.wordtoimage.ComposedWordToImage">
		<description>文字转图片</description>
		<constructor-arg index="0">
			<ref bean="fontGenRandom" />
		</constructor-arg>
		<constructor-arg index="1">
			<ref bean="backGenUni" />
		</constructor-arg>
		<constructor-arg index="2">
			<ref bean="randomTextPaster" />
		</constructor-arg>
	</bean>
	<bean id="fontGenRandom" class="com.octo.captcha.component.image.fontgenerator.RandomFontGenerator">
		<description>字体生成器</description>
		<constructor-arg index="0">
			<value>30</value><!-- 字体最小大小 -->
		</constructor-arg>
		<constructor-arg index="1">
			<value>30</value><!-- 字体最大大小 -->
		</constructor-arg>
		<constructor-arg index="2">
			<list>
				<ref bean="fontArial" /><!-- 所使用的字体集合 -->
				<ref bean="fontBellMt" />
				<ref bean="fontCreditValley" />
			</list>
		</constructor-arg>
	</bean>
	<bean id="backGenUni" class="com.octo.captcha.component.image.backgroundgenerator.UniColorBackgroundGenerator">
		<description>背景图片生成器</description>
		<constructor-arg index="0">
			<value>100</value>
		</constructor-arg>
		<constructor-arg index="1">
			<value>50</value>
		</constructor-arg>
	</bean>
	<bean id="simpleWhitePaster" class="com.octo.captcha.component.image.textpaster.SimpleTextPaster">
		<constructor-arg type="java.lang.Integer" index="0">
			<value>4</value>
		</constructor-arg>
		<constructor-arg type="java.lang.Integer" index="1">
			<value>4</value>
		</constructor-arg>
		<constructor-arg type="java.awt.Color" index="2">
			<ref bean="colorGreen" />
		</constructor-arg>
	</bean>

	<bean id="randomTextPaster" class="com.octo.captcha.component.image.textpaster.DecoratedRandomTextPaster">
		<constructor-arg type="java.lang.Integer" index="0">
			<value>4</value>
		</constructor-arg>
		<constructor-arg type="java.lang.Integer" index="1">
			<value>4</value>
		</constructor-arg>
		<constructor-arg index="2">
			<ref bean="randomListColorGenerator" />
		</constructor-arg>
		<constructor-arg index="3">
			<ref bean="lineTextDecorator" />
		</constructor-arg>
	</bean>
	
	<bean id="singleColorGenerator" class="com.octo.captcha.component.image.color.SingleColorGenerator">
		<description>单一颜色生成器</description>
		<constructor-arg type="java.awt.Color" index="0">
			<ref bean="colorGreen" />
		</constructor-arg>
	</bean>
	
	<bean id="randomListColorGenerator" class="com.octo.captcha.component.image.color.RandomListColorGenerator">
		<description>随机颜色生成器</description>
		<constructor-arg index="0">
			<list>
				<ref bean="color1" />
				<ref bean="color2" />
				<ref bean="color3" />
			</list>
		</constructor-arg>
	</bean>
	
	<bean id="lineTextDecorator" class="com.octo.captcha.component.image.textpaster.textdecorator.LineTextDecorator">
		<description>干扰线</description>
		<constructor-arg type="java.lang.Integer" index="0">
			<value>1</value><!-- 干扰线数量 -->
		</constructor-arg>
		<constructor-arg  index="1">
			<ref bean="randomListColorGenerator" /><!-- 干扰线颜色 -->
		</constructor-arg>
	</bean>
	<bean id="baffleTextDecorator" class="com.octo.captcha.component.image.textpaster.textdecorator.BaffleTextDecorator">
		<description>干扰点</description>
		<constructor-arg type="java.lang.Integer" index="0">
			<value>1</value><!-- 干扰线数量 -->
		</constructor-arg>
		<constructor-arg type="java.awt.Color" index="1">
			<ref bean="colorGreen" /><!-- 干扰线颜色 -->
		</constructor-arg>
	</bean>
	
	<bean id="fontArial" class="java.awt.Font">
		<constructor-arg index="0">
			<value>Arial</value>
		</constructor-arg>
		<constructor-arg index="1">
			<value>0</value>
		</constructor-arg>
		<constructor-arg index="2">
			<value>30</value>
		</constructor-arg>
	</bean>
	<bean id="fontBellMt" class="java.awt.Font">
		<constructor-arg index="0">
			<value>Bell MT</value>
		</constructor-arg>
		<constructor-arg index="1">
			<value>0</value>
		</constructor-arg>
		<constructor-arg index="2">
			<value>30</value>
		</constructor-arg>
	</bean>
	<bean id="fontCreditValley" class="java.awt.Font">
		<constructor-arg index="0">
			<value>Credit valley</value>
		</constructor-arg>
		<constructor-arg index="1">
			<value>0</value>
		</constructor-arg>
		<constructor-arg index="2">
			<value>30</value>
		</constructor-arg>
	</bean>
	<bean id="colorGreen" class="java.awt.Color">
		<constructor-arg type="int" index="0">
			<value>0</value>
		</constructor-arg>
		<constructor-arg type="int" index="1">
			<value>255</value>
		</constructor-arg>
		<constructor-arg type="int" index="2">
			<value>0</value>
		</constructor-arg>
	</bean>
	<bean id="color1" class="java.awt.Color">
		<constructor-arg type="int" index="0">
			<value>23</value>
		</constructor-arg>
		<constructor-arg type="int" index="1">
			<value>67</value>
		</constructor-arg>
		<constructor-arg type="int" index="2">
			<value>172</value>
		</constructor-arg>
	</bean>
	<bean id="color2" class="java.awt.Color">
		<constructor-arg type="int" index="0">
			<value>220</value>
		</constructor-arg>
		<constructor-arg type="int" index="1">
			<value>34</value>
		</constructor-arg>
		<constructor-arg type="int" index="2">
			<value>11</value>
		</constructor-arg>
	</bean>
	<bean id="color3" class="java.awt.Color">
		<constructor-arg type="int" index="0">
			<value>23</value>
		</constructor-arg>
		<constructor-arg type="int" index="1">
			<value>170</value>
		</constructor-arg>
		<constructor-arg type="int" index="2">
			<value>27</value>
		</constructor-arg>
	</bean>
</beans>